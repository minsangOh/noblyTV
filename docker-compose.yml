version: '3'

services:
  sapi:
    build: 
      context: ./backend/project/
      dockerfile: Dockerfile
    ports:
      - "8888:8080"
    networks:
      - snet

  sweb:
    build: 
      context: ./frontend/app/
      dockerfile: Dockerfile
    ports:
      - "3001:3000"
    networks:
      - snet

  nginx-file-server:
    image: nginx
    volumes:
      - ./videos:/usr/share/nginx/html:ro
    ports:
      - "8880:80"
    networks:
      - snet
    command: /bin/sh -c "chmod -R 755 /usr/share/nginx/html && nginx -g 'daemon off;'"

networks:
  snet:
